<!DOCTYPE html>
<html lang="zh-cmn">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="keywords" content="mgg, mgg0, mgg1, mflac, mflac0, mflac1" />
    <meta name="description" content="解密 mgg 文件, 解密 mflac 文件" />
    <title>QMC2-WASM</title>
    <link rel="stylesheet" href="./app.css">
  </head>
  <body>
    <div id="dragroot"></div>
    <header>
      <h1>QMC2-WASM <small>(实验性)</small></h1>
    </header>

    <main id="app" data-decoded="true" data-file-loaded="false">
      <p>一个用于解密 <code>mflac</code>/<code>mgg</code> 文件的小工具</p>
      <p>
        <label>
          <input type="file" id="input" />
          <button type="button" id="btn_start">选择需要解密的文件</button>
        </label>
        <br />
        <span id="dnd-hint" class="hint">(如果浏览器支持，拖放进来也可以)</span>
      </p>
      <section id="progress">
        <progress id="prog" max="100" value="0"></progress>
        <p>正在处理文件，请稍后…</p>
      </section>
      <section id="preview-and-download">
        <p><audio id="player" controls></audio></p>
        <p>下载：<a href="#" id="download">等待解密…</a></p>
      </section>

      <details id="decryption-config" open>
        <summary>解密设定</summary>

        <p>
          <label>
            密钥解密种子
            <br />
            <input type="text" id="decryption_seed" value="0" type="number">
          </label>
        </p>
        <p>
          <label>
            混淆密钥 1 (16 字节)
            <br />
            <textarea id="mix_key_1">0x00, 0x00, 0x00, ...</textarea>
          </label>
        </p>
        <p>
          <label>
            混淆密钥 2 (16 字节)
            <textarea id="mix_key_2">0x00, 0x00, 0x00, ...</textarea>
          </label>
        </p>
        <p style="text-align: center">
          <button id="config-clear" type="button">清空设定</button>
          <button id="config-save"  type="button">储存设定</button>
          <br>
          <i class="hint">设定储存后，下次访问将自动读取。</i>
        </p>
      </details>

      <hr />
    </main>

    <footer>
      <p>
        <a href="https://github.com/jixunmoe/qmc2/wiki/批量转换">批量转换</a>
        | <a href="https://github.com/jixunmoe/qmc2/wiki/支持的客户端">支持的客户端</a>
      </p>
      <p style="font-style: italic" lang="en">
        Part of
        <a target="_blank" href="https://github.com/jixunmoe/qmc2/">QMC2</a>
        project. <br />
        Licensed under the
        <a
          target="_blank"
          href="https://github.com/jixunmoe/qmc2/blob/main/LICENSE"
        >
          MIT License
        </a>
        (<a target="_blank" href="./source.html">src</a>
        | <a target="_blank" href="./docs/">doc</a>).
      </p>
    </footer>

    <section id="backend-info">
      QMC2-Crypto: 
      <code id="qmc2-backend">加载中</code>
    </section>
    <script defer async src="./app.js"></script>
  </body>
</html>
